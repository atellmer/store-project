var Spawn=function(){"use strict";return function(){var a={},b={},c={},d={},e=function(){function f(a,b){var e,c=a.split("."),d=i(b);for(e=0;e<c.length;e++){if(!d.hasOwnProperty(c[e]))return!1;d=d[c[e]]}return d}function g(c){var e;for(e in d)d.hasOwnProperty(e)&&(e===c?h(e):(c.length<e.length&&null!==e.match(new RegExp("^"+c+".","i"))&&f(e,b)!==f(e,a)&&h(e),c.length>e.length&&null!==c.match(new RegExp("^"+e+".","i"))&&h(e)))}function h(a){var b;for(b=0;b<d[a].length;b++)"function"==typeof d[a][b]&&d[a][b]()}function i(a){return JSON.parse(JSON.stringify(a))}var e=this;arguments[0]&&"object"==typeof arguments[0]&&(a=arguments[0]),Spawn=function(){return e},e.getState=function(){return i(a)},e.detect=function(b,h){return"function"!=typeof h?(console.warn("Detect method takes only a function!"),e):(d[b]||(d[b]=[]),d[b].push(h),f(b,a)&&(c=i(a),g(b)),e)},e.update=function(d,h){var n,j=d.split("."),k=i(a),l=k;for(n=0;n<j.length;n++){if(k.hasOwnProperty(j[n])||(k[j[n]]={}),n===j.length-1){k[j[n]]=h;break}k=k[j[n]]}return c=i(l),JSON.stringify(f(d,a))!==JSON.stringify(f(d,c))&&(a=i(c),g(d),b=i(c)),e}};return e}()}();